<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foster Home & Placement Management - EWOC</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/pages/foster-management.css">
</head>
<body>
    <div id="navbar-container"></div>
    
    <main class="foster-management-container">
        <div class="page-header">
            <h1>üè† Foster Home & Placement Management</h1>
            <p class="page-description">Manage foster applications, homes, and animal placements</p>
        </div>

        <!-- Statistics Dashboard -->
        <div class="stats-dashboard">
            <div class="stat-card">
                <div class="stat-icon">üìã</div>
                <div class="stat-content">
                    <h3 id="stat-applications">0</h3>
                    <p>Applications</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üè†</div>
                <div class="stat-content">
                    <h3 id="stat-homes">0</h3>
                    <p>Active Homes</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üêæ</div>
                <div class="stat-content">
                    <h3 id="stat-placements">0</h3>
                    <p>Active Placements</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚ù§Ô∏è</div>
                <div class="stat-content">
                    <h3 id="stat-adoptions">0</h3>
                    <p>Successful Adoptions</p>
                </div>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs-container">
            <div class="tabs">
                <button class="tab-btn active" data-tab="applications">Applications</button>
                <button class="tab-btn" data-tab="homes">Foster Homes</button>
                <button class="tab-btn" data-tab="placements">Placements</button>
                <button class="tab-btn" data-tab="matching">Matching</button>
                <button class="tab-btn" data-tab="reports">Reports</button>
            </div>
        </div>

        <!-- Applications Tab -->
        <div id="applications-tab" class="tab-content active">
            <div class="tab-header">
                <h2>Foster Applications</h2>
                <div class="tab-actions">
                    <button class="btn btn-secondary" onclick="fosterManagement.exportApplications()">
                        üìä Export
                    </button>
                    <button class="btn btn-primary" onclick="fosterManagement.showApplicationForm()">
                        ‚ûï New Application
                    </button>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters-section">
                <div class="filter-group">
                    <label for="app-status-filter">Status:</label>
                    <select id="app-status-filter" onchange="fosterManagement.filterApplications()">
                        <option value="">All</option>
                        <option value="pending">Pending</option>
                        <option value="under-review">Under Review</option>
                        <option value="inspection-scheduled">Inspection Scheduled</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                        <option value="on-hold">On Hold</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="app-search">Search:</label>
                    <input type="text" id="app-search" placeholder="Name, email, or application number" 
                           oninput="fosterManagement.filterApplications()">
                </div>
            </div>

            <!-- Applications List -->
            <div class="data-grid" id="applications-list">
                <div class="loading-message">Loading applications...</div>
            </div>
        </div>

        <!-- Foster Homes Tab -->
        <div id="homes-tab" class="tab-content">
            <div class="tab-header">
                <h2>Foster Homes</h2>
                <div class="tab-actions">
                    <button class="btn btn-secondary" onclick="fosterManagement.calculateAllMetrics()">
                        üìà Update Metrics
                    </button>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters-section">
                <div class="filter-group">
                    <label for="home-status-filter">Status:</label>
                    <select id="home-status-filter" onchange="fosterManagement.filterHomes()">
                        <option value="">All</option>
                        <option value="active">Active</option>
                        <option value="available">Available</option>
                        <option value="full">Full</option>
                        <option value="inactive">Inactive</option>
                        <option value="suspended">Suspended</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="home-specialization-filter">Specialization:</label>
                    <select id="home-specialization-filter" onchange="fosterManagement.filterHomes()">
                        <option value="">All</option>
                        <option value="puppies">Puppies</option>
                        <option value="kittens">Kittens</option>
                        <option value="senior">Senior</option>
                        <option value="medical">Medical</option>
                        <option value="behavioral">Behavioral</option>
                        <option value="special-needs">Special Needs</option>
                    </select>
                </div>
            </div>

            <!-- Homes List -->
            <div class="data-grid" id="homes-list">
                <div class="loading-message">Loading foster homes...</div>
            </div>
        </div>

        <!-- Placements Tab -->
        <div id="placements-tab" class="tab-content">
            <div class="tab-header">
                <h2>Animal Placements</h2>
                <div class="tab-actions">
                    <button class="btn btn-secondary" onclick="fosterManagement.exportPlacements()">
                        üìä Export
                    </button>
                    <button class="btn btn-primary" onclick="fosterManagement.showPlacementForm()">
                        ‚ûï New Placement
                    </button>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters-section">
                <div class="filter-group">
                    <label for="placement-status-filter">Status:</label>
                    <select id="placement-status-filter" onchange="fosterManagement.filterPlacements()">
                        <option value="">All</option>
                        <option value="active">Active</option>
                        <option value="completed">Completed</option>
                        <option value="returned">Returned</option>
                        <option value="adopted">Adopted</option>
                        <option value="transferred">Transferred</option>
                    </select>
                </div>
            </div>

            <!-- Placements List -->
            <div class="data-grid" id="placements-list">
                <div class="loading-message">Loading placements...</div>
            </div>
        </div>

        <!-- Matching Tab -->
        <div id="matching-tab" class="tab-content">
            <div class="tab-header">
                <h2>Animal-Foster Matching</h2>
                <p class="tab-description">Find the best foster home match for animals</p>
            </div>

            <div class="matching-section">
                <div class="matching-form">
                    <h3>Select Animal</h3>
                    <select id="matching-animal-select" onchange="fosterManagement.findMatches()">
                        <option value="">-- Select Animal --</option>
                    </select>
                    
                    <div id="animal-details" class="animal-details-card" style="display: none;"></div>
                </div>

                <div id="matching-results" class="matching-results" style="display: none;">
                    <h3>Matching Results</h3>
                    <div id="matches-list"></div>
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reports-tab" class="tab-content">
            <div class="tab-header">
                <h2>Reports & Analytics</h2>
            </div>

            <div class="reports-grid">
                <div class="report-card">
                    <h3>üìà Performance Metrics</h3>
                    <p>Foster home performance and success rates</p>
                    <button class="btn btn-primary" onclick="fosterManagement.loadPerformanceReport()">
                        View Report
                    </button>
                </div>
                
                <div class="report-card">
                    <h3>üìä Placement Analytics</h3>
                    <p>Placement statistics and trends</p>
                    <button class="btn btn-primary" onclick="fosterManagement.loadPlacementAnalytics()">
                        View Report
                    </button>
                </div>
                
                <div class="report-card">
                    <h3>üìÖ Monthly Summary</h3>
                    <p>Applications, placements, and adoptions</p>
                    <button class="btn btn-primary" onclick="fosterManagement.loadMonthlySummary()">
                        View Report
                    </button>
                </div>
                
                <div class="report-card">
                    <h3>‚ö†Ô∏è Alerts & Issues</h3>
                    <p>Active alerts and reported issues</p>
                    <button class="btn btn-primary" onclick="fosterManagement.loadAlertsReport()">
                        View Report
                    </button>
                </div>
            </div>

            <div id="report-content" class="report-content"></div>
        </div>
    </main>

    <!-- Application Form Modal -->
    <div id="application-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Foster Application Form</h2>
                <span class="close-modal" onclick="fosterManagement.closeModal('application-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="application-form">
                    <!-- Applicant Information -->
                    <div class="form-section">
                        <h3>Personal Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="firstName">First Name *</label>
                                <input type="text" id="firstName" required>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name *</label>
                                <input type="text" id="lastName" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email *</label>
                                <input type="email" id="email" required>
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone *</label>
                                <input type="tel" id="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="dateOfBirth">Date of Birth</label>
                                <input type="date" id="dateOfBirth">
                            </div>
                            <div class="form-group">
                                <label for="occupation">Occupation</label>
                                <input type="text" id="occupation">
                            </div>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="street">Street Address</label>
                                <input type="text" id="street">
                            </div>
                            <div class="form-group">
                                <label for="city">City</label>
                                <input type="text" id="city">
                            </div>
                            <div class="form-group">
                                <label for="state">State</label>
                                <input type="text" id="state">
                            </div>
                            <div class="form-group">
                                <label for="zipCode">Zip Code</label>
                                <input type="text" id="zipCode">
                            </div>
                        </div>
                    </div>

                    <!-- Household Information -->
                    <div class="form-section">
                        <h3>Household Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="residenceType">Residence Type *</label>
                                <select id="residenceType" required>
                                    <option value="">Select...</option>
                                    <option value="house">House</option>
                                    <option value="apartment">Apartment</option>
                                    <option value="condo">Condo</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="ownOrRent">Own or Rent? *</label>
                                <select id="ownOrRent" required>
                                    <option value="">Select...</option>
                                    <option value="own">Own</option>
                                    <option value="rent">Rent</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="hasYard">
                                    Has Yard
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="yardFenced">
                                    Yard is Fenced
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Experience -->
                    <div class="form-section">
                        <h3>Experience with Animals</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="previousFoster">
                                    Previous Foster Experience
                                </label>
                            </div>
                            <div class="form-group">
                                <label for="petOwnershipYears">Years as Pet Owner</label>
                                <input type="number" id="petOwnershipYears" min="0">
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="canHandleSpecialNeeds">
                                    Can Handle Special Needs
                                </label>
                            </div>
                            <div class="form-group">
                                <label for="experienceLevel">Experience Level</label>
                                <select id="experienceLevel">
                                    <option value="beginner">Beginner</option>
                                    <option value="intermediate">Intermediate</option>
                                    <option value="advanced">Advanced</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Availability -->
                    <div class="form-section">
                        <h3>Availability</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="startDate">Available Start Date</label>
                                <input type="date" id="startDate">
                            </div>
                            <div class="form-group">
                                <label for="maxAnimals">Maximum Animals</label>
                                <input type="number" id="maxAnimals" min="1" value="1">
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="availableForEmergencies">
                                    Available for Emergencies
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Questionnaire -->
                    <div class="form-section">
                        <h3>Additional Questions</h3>
                        <div class="form-group">
                            <label for="whyFoster">Why do you want to foster?</label>
                            <textarea id="whyFoster" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="timeCommitment">Describe your time commitment</label>
                            <textarea id="timeCommitment" rows="2"></textarea>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" 
                                onclick="fosterManagement.closeModal('application-modal')">Cancel</button>
                        <button type="submit" class="btn btn-primary">Submit Application</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Application Details Modal -->
    <div id="application-details-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Application Details</h2>
                <span class="close-modal" onclick="fosterManagement.closeModal('application-details-modal')">&times;</span>
            </div>
            <div class="modal-body" id="application-details-content"></div>
        </div>
    </div>

    <!-- Placement Form Modal -->
    <div id="placement-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>New Placement</h2>
                <span class="close-modal" onclick="fosterManagement.closeModal('placement-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="placement-form">
                    <div class="form-group">
                        <label for="placement-animal">Select Animal *</label>
                        <select id="placement-animal" required></select>
                    </div>
                    <div class="form-group">
                        <label for="placement-home">Select Foster Home *</label>
                        <select id="placement-home" required></select>
                    </div>
                    <div class="form-group">
                        <label for="expectedEndDate">Expected End Date</label>
                        <input type="date" id="expectedEndDate">
                    </div>
                    <div class="form-group">
                        <label for="placement-notes">Notes</label>
                        <textarea id="placement-notes" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" 
                                onclick="fosterManagement.closeModal('placement-modal')">Cancel</button>
                        <button type="submit" class="btn btn-primary">Create Placement</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Placement Details Modal -->
    <div id="placement-details-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Placement Details</h2>
                <span class="close-modal" onclick="fosterManagement.closeModal('placement-details-modal')">&times;</span>
            </div>
            <div class="modal-body" id="placement-details-content"></div>
        </div>
    </div>

    <!-- Check-In Modal -->
    <div id="checkin-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Record Check-In</h2>
                <span class="close-modal" onclick="fosterManagement.closeModal('checkin-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="checkin-form">
                    <div class="form-group">
                        <label for="checkin-type">Check-In Type *</label>
                        <select id="checkin-type" required>
                            <option value="scheduled">Scheduled</option>
                            <option value="routine">Routine</option>
                            <option value="follow-up">Follow-Up</option>
                            <option value="emergency">Emergency</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="checkin-method">Method *</label>
                        <select id="checkin-method" required>
                            <option value="phone">Phone</option>
                            <option value="video">Video Call</option>
                            <option value="in-person">In-Person</option>
                            <option value="email">Email</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="animal-health">Animal Health *</label>
                        <select id="animal-health" required>
                            <option value="excellent">Excellent</option>
                            <option value="good">Good</option>
                            <option value="fair">Fair</option>
                            <option value="poor">Poor</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="animal-behavior">Animal Behavior *</label>
                        <select id="animal-behavior" required>
                            <option value="excellent">Excellent</option>
                            <option value="good">Good</option>
                            <option value="fair">Fair</option>
                            <option value="concerning">Concerning</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="checkin-notes">Notes</label>
                        <textarea id="checkin-notes" rows="4"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" 
                                onclick="fosterManagement.closeModal('checkin-modal')">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Check-In</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="footer-container"></div>

    <script src="../js/components/navbar.js"></script>
    <script src="../js/components/footer.js"></script>
    <script src="../js/pages/foster-management.js"></script>
</body>
</html>
