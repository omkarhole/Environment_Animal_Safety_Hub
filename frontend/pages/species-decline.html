<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Species Decline Statistics | Environment & Animal Safety Hub</title>
  <meta name="description" content="Interactive charts showing bird population loss, ocean species decline, and forest cover loss. Real-time data visualizations of biodiversity crisis.">
  <meta name="keywords" content="species decline, biodiversity loss, bird population, ocean species, forest cover, statistics charts, environmental data">

  <!-- Favicon -->
  <link rel="icon" href="../assets/icons/favicon.ico" type="image/x-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Global Styles -->
  <link rel="stylesheet" href="../css/style.css">
  
  <!-- Component Styles -->
  <link rel="stylesheet" href="../css/components/navbar.css">
  <link rel="stylesheet" href="../css/components/footer.css">

  <!-- Page-specific Styles -->
  <style>
    :root {
      --bird-orange: #E67E22;
      --ocean-blue: #3498DB;
      --forest-green: #27AE60;
      --danger-red: #E74C3C;
      --dark-bg: #0A1E2C;
      --card-bg: rgba(255, 255, 255, 0.05);
      --chart-grid: rgba(255, 255, 255, 0.1);
    }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      background: var(--dark-bg);
      color: white;
      line-height: 1.6;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, #0A1E2C 0%, #1B4F72 100%);
      color: white;
      padding: 100px 20px 60px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .hero-content {
      max-width: 1000px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }

    .hero h1 {
      font-family: 'Roboto Mono', monospace;
      font-size: 3.5rem;
      margin-bottom: 1rem;
      background: linear-gradient(to right, #E67E22, #3498DB, #27AE60);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-subtitle {
      font-size: 1.3rem;
      max-width: 700px;
      margin: 0 auto 40px;
      color: #AED6F1;
    }

    .stats-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      max-width: 900px;
      margin: 40px auto;
    }

    .stat-card {
      background: rgba(0, 0, 0, 0.3);
      padding: 25px 20px;
      border-radius: 15px;
      text-align: center;
      border-top: 4px solid;
      transition: transform 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
    }

    .stat-card.birds { border-color: var(--bird-orange); }
    .stat-card.ocean { border-color: var(--ocean-blue); }
    .stat-card.forest { border-color: var(--forest-green); }

    .stat-number {
      font-family: 'Roboto Mono', monospace;
      font-size: 2.5rem;
      font-weight: bold;
      margin: 10px 0;
    }

    .stat-card.birds .stat-number { color: var(--bird-orange); }
    .stat-card.ocean .stat-number { color: var(--ocean-blue); }
    .stat-card.forest .stat-number { color: var(--forest-green); }

    /* Main Content */
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .section-title {
      text-align: center;
      margin: 60px 0 40px;
    }

    .section-title h2 {
      font-family: 'Roboto Mono', monospace;
      font-size: 2.5rem;
      display: inline-block;
      padding-bottom: 10px;
      border-bottom: 3px solid;
    }

    .birds-title { border-color: var(--bird-orange); }
    .ocean-title { border-color: var(--ocean-blue); }
    .forest-title { border-color: var(--forest-green); }

    /* Chart Containers */
    .chart-container {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 50px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 20px;
    }

    .chart-title {
      font-family: 'Roboto Mono', monospace;
      font-size: 1.8rem;
      margin: 0;
    }

    .chart-title i {
      margin-right: 10px;
    }

    .chart-controls {
      display: flex;
      gap: 15px;
    }

    .year-selector {
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.3);
      color: white;
      padding: 8px 15px;
      border-radius: 20px;
      font-family: 'Poppins', sans-serif;
      cursor: pointer;
    }

    /* Chart Styles */
    .chart {
      position: relative;
      height: 400px;
      margin: 20px 0;
    }

    .bar-chart {
      display: flex;
      align-items: flex-end;
      height: 300px;
      gap: 40px;
      padding: 20px;
      border-bottom: 2px solid var(--chart-grid);
      border-left: 2px solid var(--chart-grid);
    }

    .bar {
      flex: 1;
      position: relative;
      transition: height 1s ease;
    }

    .bar-label {
      position: absolute;
      bottom: -30px;
      left: 0;
      right: 0;
      text-align: center;
      font-size: 0.9rem;
      color: #BDC3C7;
    }

    .bar-value {
      position: absolute;
      top: -25px;
      left: 0;
      right: 0;
      text-align: center;
      font-weight: bold;
      font-family: 'Roboto Mono', monospace;
    }

    .y-axis {
      position: absolute;
      left: -40px;
      top: 0;
      bottom: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 20px 0;
      font-size: 0.9rem;
      color: #BDC3C7;
    }

    /* Line Chart */
    .line-chart {
      position: relative;
      height: 300px;
      padding: 20px;
      border-bottom: 2px solid var(--chart-grid);
      border-left: 2px solid var(--chart-grid);
    }

    .line-path {
      fill: none;
      stroke-width: 3;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .data-point {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      transform: translate(-50%, 50%);
    }

    /* Donut Chart */
    .donut-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
    }

    .donut-chart {
      width: 250px;
      height: 250px;
      position: relative;
    }

    .donut-segment {
      transform-origin: center;
    }

    .donut-label {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }

    .donut-legend {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }

    /* Key Findings */
    .key-findings {
      background: rgba(231, 76, 60, 0.1);
      border-radius: 15px;
      padding: 25px;
      margin: 30px 0;
      border-left: 4px solid var(--danger-red);
    }

    .key-findings h4 {
      color: #FFEAA7;
      margin-bottom: 15px;
      font-size: 1.3rem;
    }

    /* Impact Section */
    .impact-section {
      background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(52, 152, 219, 0.1));
      border-radius: 20px;
      padding: 40px;
      margin: 60px 0;
    }

    .impact-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }

    .impact-card {
      background: rgba(255,255,255,0.05);
      padding: 25px;
      border-radius: 15px;
      text-align: center;
      transition: transform 0.3s ease;
    }

    .impact-card:hover {
      transform: translateY(-5px);
    }

    .impact-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
    }

    /* Data Sources */
    .data-sources {
      background: rgba(255,255,255,0.05);
      border-radius: 15px;
      padding: 25px;
      margin: 40px 0;
      font-size: 0.9rem;
      color: #BDC3C7;
    }

    /* Action Section */
    .action-section {
      text-align: center;
      padding: 60px 20px;
      background: linear-gradient(135deg, #0A1E2C, #1C2833);
    }

    .action-title {
      font-family: 'Roboto Mono', monospace;
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #FFEAA7;
    }

    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 30px;
    }

    .action-btn {
      padding: 15px 30px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .action-btn.primary {
      background: var(--danger-red);
      color: white;
      border: none;
    }

    .action-btn.secondary {
      background: transparent;
      color: white;
      border: 2px solid var(--forest-green);
    }

    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }

    /* Live Counter */
    .live-counter {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0,0,0,0.8);
      padding: 15px;
      border-radius: 15px;
      border-left: 4px solid var(--danger-red);
      backdrop-filter: blur(10px);
      z-index: 100;
      max-width: 250px;
    }

    .counter-value {
      font-family: 'Roboto Mono', monospace;
      font-size: 1.5rem;
      color: var(--danger-red);
      font-weight: bold;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2.5rem;
      }
      
      .hero-subtitle {
        font-size: 1.1rem;
      }
      
      .stats-summary {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .section-title h2 {
        font-size: 2rem;
      }
      
      .chart-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .bar-chart {
        gap: 20px;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .action-btn {
        width: 100%;
        justify-content: center;
      }
      
      .donut-container {
        flex-direction: column;
      }
      
      .live-counter {
        position: static;
        margin: 20px auto;
        max-width: 100%;
      }
    }

    @media (max-width: 480px) {
      .stats-summary {
        grid-template-columns: 1fr;
      }
      
      .hero h1 {
        font-size: 2rem;
      }
      
      .chart {
        height: 300px;
      }
      
      .bar-chart {
        gap: 10px;
      }
      
      .bar-label {
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <div id="navbar-container"></div>

  <!-- Live Counter -->
  <div class="live-counter">
    <div class="counter-value" id="speciesCounter">0</div>
    <div>Species lost since you opened this page</div>
  </div>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1>Species Decline Statistics</h1>
      <p class="hero-subtitle">Real-time data visualization of biodiversity loss across birds, ocean life, and forests worldwide</p>
      
      <div class="stats-summary">
        <div class="stat-card birds">
          <i class="fas fa-dove" style="font-size: 2rem; color: var(--bird-orange);"></i>
          <div class="stat-number">3 Billion</div>
          <p>Birds lost in North America since 1970</p>
        </div>
        
        <div class="stat-card ocean">
          <i class="fas fa-fish" style="font-size: 2rem; color: var(--ocean-blue);"></i>
          <div class="stat-number">-49%</div>
          <p>Marine populations declined since 1970</p>
        </div>
        
        <div class="stat-card forest">
          <i class="fas fa-tree" style="font-size: 2rem; color: var(--forest-green);"></i>
          <div class="stat-number">420M Ha</div>
          <p>Forest lost since 1990</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <div class="main-content">
    
    <!-- Bird Population Loss -->
    <section class="chart-section">
      <div class="section-title">
        <h2 class="birds-title"><i class="fas fa-dove"></i> Bird Population Decline</h2>
      </div>
      
      <div class="chart-container">
        <div class="chart-header">
          <h3 class="chart-title"><i class="fas fa-chart-line" style="color: var(--bird-orange);"></i> North American Bird Loss (1970-2023)</h3>
          <div class="chart-controls">
            <select class="year-selector" onchange="updateBirdChart(this.value)">
              <option value="all">All Years</option>
              <option value="1970">1970-1980</option>
              <option value="1990">1990-2000</option>
              <option value="2010">2010-2020</option>
            </select>
          </div>
        </div>
        
        <div class="chart">
          <div class="bar-chart" id="birdBarChart">
            <!-- Bars will be generated by JavaScript -->
          </div>
          <div class="y-axis">
            <div>3B</div>
            <div>2B</div>
            <div>1B</div>
            <div>0</div>
          </div>
        </div>
        
        <div class="key-findings">
          <h4><i class="fas fa-exclamation-triangle"></i> Key Findings:</h4>
          <p>‚Ä¢ Grassland birds declined by 53% since 1970</p>
          <p>‚Ä¢ 1 in 4 birds in North America has disappeared</p>
          <p>‚Ä¢ Major causes: Habitat loss, pesticides, and climate change</p>
        </div>
      </div>
      
      <!-- Bird Species Details -->
      <div class="impact-grid">
        <div class="impact-card">
          <div class="impact-icon" style="color: var(--bird-orange);">üê¶</div>
          <h4>Most Affected</h4>
          <p>Grassland birds (-53%), shorebirds (-37%), and insect-eating birds</p>
        </div>
        <div class="impact-card">
          <div class="impact-icon" style="color: var(--bird-orange);">üèôÔ∏è</div>
          <h4>Urban Impact</h4>
          <p>City birds declined 29% due to light pollution and habitat fragmentation</p>
        </div>
        <div class="impact-card">
          <div class="impact-icon" style="color: var(--bird-orange);">üå°Ô∏è</div>
          <h4>Climate Effect</h4>
          <p>Breeding ranges shifting northward at 1.5km/year due to warming</p>
        </div>
      </div>
    </section>

    <!-- Ocean Species Decline -->
    <section class="chart-section">
      <div class="section-title">
        <h2 class="ocean-title"><i class="fas fa-water"></i> Ocean Species Decline</h2>
      </div>
      
      <div class="chart-container">
        <div class="chart-header">
          <h3 class="chart-title"><i class="fas fa-chart-pie" style="color: var(--ocean-blue);"></i> Marine Population Trends (1970-2020)</h3>
        </div>
        
        <div class="donut-container">
          <div class="donut-chart" id="oceanDonutChart">
            <!-- Donut chart will be generated by JavaScript -->
          </div>
          <div class="donut-legend" id="oceanLegend">
            <!-- Legend will be generated by JavaScript -->
          </div>
        </div>
        
        <div class="key-findings">
          <h4><i class="fas fa-exclamation-triangle"></i> Critical Status:</h4>
          <p>‚Ä¢ Shark and ray populations declined 71% since 1970</p>
          <p>‚Ä¢ Coral reefs could decline 70-90% at 1.5¬∞C warming</p>
          <p>‚Ä¢ 90% of large predatory fish already gone</p>
        </div>
      </div>
      
      <!-- Ocean Impact Grid -->
      <div class="impact-grid">
        <div class="impact-card">
          <div class="impact-icon" style="color: var(--ocean-blue);">ü¶à</div>
          <h4>Shark Decline</h4>
          <p>71% population decrease since 1970 due to overfishing</p>
        </div>
        <div class="impact-card">
          <div class="impact-icon" style="color: var(--ocean-blue);">üê†</div>
          <h4>Coral Crisis</h4>
          <p>50% of coral reefs lost since 1950, 90% at risk by 2030</p>
        </div>
        <div class="impact-card">
          <div class="impact-icon" style="color: var(--ocean-blue);">üêã</div>
          <h4>Whale Recovery</h4>
          <p>Some whale populations recovering due to protection laws</p>
        </div>
      </div>
    </section>

    <!-- Forest Cover Loss -->
    <section class="chart-section">
      <div class="section-title">
        <h2 class="forest-title"><i class="fas fa-tree"></i> Forest Cover Loss</h2>
      </div>
      
      <div class="chart-container">
        <div class="chart-header">
          <h3 class="chart-title"><i class="fas fa-chart-bar" style="color: var(--forest-green);"></i> Annual Forest Loss (2001-2023)</h3>
          <div class="chart-controls">
            <select class="year-selector" onchange="updateForestChart(this.value)">
              <option value="global">Global View</option>
              <option value="amazon">Amazon</option>
              <option value="indonesia">Indonesia</option>
              <option value="congo">Congo Basin</option>
            </select>
          </div>
        </div>
        
        <div class="chart">
          <div class="line-chart" id="forestLineChart">
            <!-- Line chart will be generated by JavaScript -->
          </div>
          <div class="y-axis">
            <div>25M ha</div>
            <div>20M ha</div>
            <div>15M ha</div>
            <div>10M ha</div>
            <div>5M ha</div>
            <div>0</div>
          </div>
        </div>
        
        <div class="key-findings">
          <h4><i class="fas fa-exclamation-triangle"></i> Deforestation Facts:</h4>
          <p>‚Ä¢ 10 million hectares lost annually (size of Iceland)</p>
          <p>‚Ä¢ Primary tropical forest loss increased 12% in 2022</p>
          <p>‚Ä¢ Causes: Agriculture (80%), logging, mining, and fires</p>
        </div>
      </div>
      
      <!-- Forest Impact Grid -->
      <div class="impact-grid">
        <div class="impact-card">
          <div class="impact-icon" style="color: var(--forest-green);">üå≥</div>
          <h4>Primary Forests</h4>
          <p>Lost 4.1 million hectares in 2022 alone</p>
        </div>
        <div class="impact-card">
          <div class="impact-icon" style="color: var(--forest-green);">üî•</div>
          <h4>Fire Damage</h4>
          <p>Over 9 million hectares burned annually</p>
        </div>
        <div class="impact-card">
          <div class="impact-icon" style="color: var(--forest-green);">üåç</div>
          <h4>Carbon Impact</h4>
          <p>Deforestation causes 15% of global CO‚ÇÇ emissions</p>
        </div>
      </div>
    </section>

    <!-- Data Sources -->
    <div class="data-sources">
      <h4><i class="fas fa-database"></i> Data Sources:</h4>
      <p>‚Ä¢ Bird data: Cornell Lab of Ornithology, Audubon Society</p>
      <p>‚Ä¢ Ocean data: IUCN Red List, WWF Living Planet Report</p>
      <p>‚Ä¢ Forest data: Global Forest Watch, FAO Forest Resources Assessment</p>
      <p>‚Ä¢ All statistics are based on peer-reviewed scientific studies</p>
    </div>

    <!-- Action Section -->
    <section class="action-section">
      <h2 class="action-title">Help Reverse the Trend</h2>
      <p style="max-width: 700px; margin: 0 auto 30px; color: #BDC3C7;">
        These statistics show urgent need for action. Get involved in conservation efforts.
      </p>
      
      <div class="action-buttons">
        <a href="../pages/community-action-hub.html" class="action-btn primary">
          <i class="fas fa-hands-helping"></i> Join Conservation Efforts
        </a>
        <a href="../pages/education.html" class="action-btn secondary">
          <i class="fas fa-graduation-cap"></i> Learn About Solutions
        </a>
        <a href="../pages/resources.html" class="action-btn secondary">
          <i class="fas fa-chart-bar"></i> Download Full Dataset
        </a>
      </div>
      
      <div style="margin-top: 40px; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 15px; max-width: 600px; margin-left: auto; margin-right: auto;">
        <h4 style="color: #FFEAA7; margin-bottom: 15px;"><i class="fas fa-lightbulb"></i> Did You Know?</h4>
        <p>Protecting just 30% of land and ocean by 2030 could save 80% of threatened species. Your actions matter.</p>
      </div>
    </section>
  </div>

  <!-- Footer -->
  <div id="footer-container"></div>

  <!-- Scripts -->
  <script>
    // Load navbar and footer
    fetch('../components/navbar.html')
      .then(r => r.text())
      .then(html => {
        document.getElementById('navbar-container').innerHTML = html;
      });
    
    fetch('../components/footer.html')
      .then(r => r.text())
      .then(html => {
        document.getElementById('footer-container').innerHTML = html;
      });

    // Live species counter
    let speciesLost = 0;
    const speciesCounter = document.getElementById('speciesCounter');
    
    function updateCounter() {
      // Based on estimated extinction rate of 150-200 species per day
      speciesLost += Math.random() * 0.1;
      speciesCounter.textContent = speciesLost.toFixed(1);
    }
    setInterval(updateCounter, 1000);

    // Bird Population Chart Data
    const birdData = {
      all: [
        {year: '1970', value: 0, label: '1970'},
        {year: '1980', value: 500, label: '1980'},
        {year: '1990', value: 1000, label: '1990'},
        {year: '2000', value: 1800, label: '2000'},
        {year: '2010', value: 2500, label: '2010'},
        {year: '2023', value: 3000, label: '2023'}
      ],
      '1970': [
        {year: '1970', value: 0, label: '1970'},
        {year: '1975', value: 200, label: '1975'},
        {year: '1980', value: 500, label: '1980'}
      ],
      '1990': [
        {year: '1990', value: 1000, label: '1990'},
        {year: '1995', value: 1400, label: '1995'},
        {year: '2000', value: 1800, label: '2000'}
      ],
      '2010': [
        {year: '2010', value: 2500, label: '2010'},
        {year: '2015', value: 2800, label: '2015'},
        {year: '2020', value: 2950, label: '2020'},
        {year: '2023', value: 3000, label: '2023'}
      ]
    };

    // Ocean Donut Chart Data
    const oceanData = [
      {category: 'Severe Decline (-70%+)', value: 30, color: '#E74C3C'},
      {category: 'Moderate Decline (-30-70%)', value: 45, color: '#E67E22'},
      {category: 'Stable (¬±30%)', value: 20, color: '#F1C40F'},
      {category: 'Increasing', value: 5, color: '#27AE60'}
    ];

    // Forest Line Chart Data
    const forestData = {
      global: [
        {year: 2001, value: 8.5},
        {year: 2005, value: 10.2},
        {year: 2010, value: 13.0},
        {year: 2015, value: 16.2},
        {year: 2020, value: 12.2},
        {year: 2023, value: 11.8}
      ],
      amazon: [
        {year: 2001, value: 2.5},
        {year: 2005, value: 3.0},
        {year: 2010, value: 3.5},
        {year: 2015, value: 2.8},
        {year: 2020, value: 2.2},
        {year: 2023, value: 3.2}
      ],
      indonesia: [
        {year: 2001, value: 1.2},
        {year: 2005, value: 1.8},
        {year: 2010, value: 2.5},
        {year: 2015, value: 2.2},
        {year: 2020, value: 1.5},
        {year: 2023, value: 1.2}
      ],
      congo: [
        {year: 2001, value: 0.5},
        {year: 2005, value: 0.6},
        {year: 2010, value: 0.7},
        {year: 2015, value: 0.9},
        {year: 2020, value: 1.2},
        {year: 2023, value: 1.0}
      ]
    };

    // Initialize Charts
    function initCharts() {
      createBirdChart('all');
      createOceanDonut();
      createForestChart('global');
    }

    // Bird Bar Chart
    function createBirdChart(period) {
      const container = document.getElementById('birdBarChart');
      const data = birdData[period];
      
      container.innerHTML = '';
      const maxValue = 3000; // 3 billion birds
      
      data.forEach(item => {
        const barHeight = (item.value / maxValue) * 100;
        const bar = document.createElement('div');
        bar.className = 'bar';
        bar.innerHTML = `
          <div class="bar-value">${item.value}M</div>
          <div class="bar-label">${item.label}</div>
        `;
        bar.style.height = `${barHeight}%`;
        bar.style.background = `linear-gradient(to top, ${barHeight > 70 ? '#C0392B' : barHeight > 40 ? '#E67E22' : '#F39C12'}, ${barHeight > 70 ? '#E74C3C' : barHeight > 40 ? '#F39C12' : '#F7DC6F'})`;
        
        // Animate the bar
        setTimeout(() => {
          bar.style.height = `${barHeight}%`;
        }, 100);
        
        container.appendChild(bar);
      });
    }

    // Update Bird Chart
    function updateBirdChart(period) {
      createBirdChart(period);
    }

    // Ocean Donut Chart
    function createOceanDonut() {
      const container = document.getElementById('oceanDonutChart');
      const legend = document.getElementById('oceanLegend');
      
      // Create donut chart using CSS
      let cumulativeAngle = 0;
      let donutHTML = '';
      let legendHTML = '';
      
      oceanData.forEach((item, index) => {
        const angle = (item.value / 100) * 360;
        const rotation = cumulativeAngle;
        cumulativeAngle += angle;
        
        // Create donut segment
        donutHTML += `
          <div class="donut-segment" style="
            position: absolute;
            width: 100%;
            height: 100%;
            clip-path: polygon(50% 50%, 50% 0%, ${50 + 50 * Math.cos((rotation - 90) * Math.PI / 180)}% ${50 + 50 * Math.sin((rotation - 90) * Math.PI / 180)}%);
            background: conic-gradient(${item.color} 0deg ${angle}deg, transparent ${angle}deg 360deg);
            border-radius: 50%;
          "></div>
        `;
        
        // Create legend item
        legendHTML += `
          <div class="legend-item">
            <div class="legend-color" style="background: ${item.color};"></div>
            <div>
              <strong>${item.category}</strong><br>
              <small>${item.value}% of marine species</small>
            </div>
          </div>
        `;
      });
      
      container.innerHTML = donutHTML + `
        <div class="donut-label">
          <div style="font-size: 2rem; font-weight: bold; color: var(--ocean-blue);">49%</div>
          <div>Overall Decline</div>
          <div style="font-size: 0.8rem; color: #BDC3C7;">since 1970</div>
        </div>
      `;
      
      legend.innerHTML = legendHTML;
    }

    // Forest Line Chart
    function createForestChart(region) {
      const container = document.getElementById('forestLineChart');
      const data = forestData[region];
      
      container.innerHTML = '';
      
      // Create line chart using divs
      const maxValue = 25; // 25 million hectares
      const width = container.clientWidth - 40;
      const height = 300 - 40;
      
      // Create points and lines
      let pointsHTML = '';
      let lineHTML = '<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">';
      
      data.forEach((point, index) => {
        const x = (index / (data.length - 1)) * width;
        const y = height - (point.value / maxValue) * height;
        
        // Create data point
        const pointDiv = document.createElement('div');
        pointDiv.className = 'data-point';
        pointDiv.style.left = `${x + 20}px`;
        pointDiv.style.bottom = `${y}px`;
        pointDiv.style.background = point.value > 15 ? '#E74C3C' : point.value > 10 ? '#E67E22' : '#27AE60';
        pointDiv.title = `${point.year}: ${point.value}M ha`;
        container.appendChild(pointDiv);
        
        // Create line segments
        if (index > 0) {
          const prevPoint = data[index - 1];
          const prevX = ((index - 1) / (data.length - 1)) * width;
          const prevY = height - (prevPoint.value / maxValue) * height;
          
          const lineLength = Math.sqrt(Math.pow(x - prevX, 2) + Math.pow(y - prevY, 2));
          const lineAngle = Math.atan2(y - prevY, x - prevX) * 180 / Math.PI;
          
          const line = document.createElement('div');
          line.style.position = 'absolute';
          line.style.left = `${prevX + 20}px`;
          line.style.top = `${prevY}px`;
          line.style.width = `${lineLength}px`;
          line.style.height = '3px';
          line.style.background = point.value > 15 || prevPoint.value > 15 ? '#E74C3C' : 
                                 point.value > 10 || prevPoint.value > 10 ? '#E67E22' : '#27AE60';
          line.style.transformOrigin = '0 0';
          line.style.transform = `rotate(${lineAngle}deg)`;
          container.appendChild(line);
        }
        
        // Add year labels
        const label = document.createElement('div');
        label.style.position = 'absolute';
        label.style.left = `${x + 15}px`;
        label.style.bottom = '-25px';
        label.style.textAlign = 'center';
        label.style.fontSize = '0.9rem';
        label.style.color = '#BDC3C7';
        label.textContent = point.year;
        container.appendChild(label);
      });
      
      lineHTML += '</div>';
      container.innerHTML += lineHTML;
    }

    // Update Forest Chart
    function updateForestChart(region) {
      createForestChart(region);
    }

    // Interactive hover effects for charts
    function addChartInteractions() {
      // Add hover effects to bars
      document.addEventListener('mouseover', (e) => {
        if (e.target.classList.contains('bar')) {
          e.target.style.transform = 'scale(1.05)';
        }
      });
      
      document.addEventListener('mouseout', (e) => {
        if (e.target.classList.contains('bar')) {
          e.target.style.transform = 'scale(1)';
        }
      });
    }

    // Initialize everything when page loads
    document.addEventListener('DOMContentLoaded', function() {
      initCharts();
      addChartInteractions();
      
      // Make functions available globally
      window.updateBirdChart = updateBirdChart;
      window.updateForestChart = updateForestChart;
    });
  </script>
</body>
</html>