<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Records & Treatment Tracking - EWOC</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/pages/medical-records.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <div id="navbar-placeholder"></div>

    <!-- Page Header -->
    <header class="page-header">
        <div class="container">
            <h1><i class="fas fa-stethoscope"></i> Medical Records & Treatment Tracking</h1>
            <p>Comprehensive medical history, vitals tracking, and treatment management system</p>
        </div>
    </header>

    <!-- Alert Dashboard -->
    <section class="alerts-section">
        <div class="container">
            <h2><i class="fas fa-exclamation-circle"></i> Active Alerts</h2>
            <div class="alerts-container">
                <div class="alerts-grid" id="alertsGrid">
                    <!-- Alerts will be populated dynamically -->
                </div>
                <div id="noAlerts" class="no-data-message">
                    <i class="fas fa-check-circle"></i>
                    <p>No active alerts</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Stats -->
    <section class="stats-section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-file-medical"></i>
                    <h3 id="statTotalRecords">0</h3>
                    <p>Total Records</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-pills"></i>
                    <h3 id="statActiveMeds">0</h3>
                    <p>Active Medications</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-calendar-check"></i>
                    <h3 id="statScheduledVisits">0</h3>
                    <p>Scheduled Visits</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3 id="statOverdueFollowups">0</h3>
                    <p>Overdue Follow-ups</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container">
        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="records-list">
                <i class="fas fa-list"></i> Medical Records
            </button>
            <button class="tab-btn" data-tab="vitals-tracking">
                <i class="fas fa-heartbeat"></i> Vitals Tracking
            </button>
            <button class="tab-btn" data-tab="prescriptions">
                <i class="fas fa-pills"></i> Prescriptions
            </button>
            <button class="tab-btn" data-tab="vet-visits">
                <i class="fas fa-calendar-alt"></i> Vet Visits
            </button>
            <button class="tab-btn" data-tab="treatment-plans">
                <i class="fas fa-tasks"></i> Treatment Plans
            </button>
        </div>

        <!-- Medical Records List Tab -->
        <section id="records-list" class="tab-content active">
            <div class="section-header">
                <h2>Medical Records Database</h2>
                <button class="btn btn-primary" id="newRecordBtn">
                    <i class="fas fa-plus"></i> New Record
                </button>
            </div>

            <div class="search-filters">
                <input type="text" id="searchRecords" placeholder="Search by animal name, record number..." class="search-input">
                <select id="filterStatus" class="filter-select">
                    <option value="">All Status</option>
                    <option value="active">Active Treatment</option>
                    <option value="stable">Stable</option>
                    <option value="critical">Critical</option>
                </select>
            </div>

            <div class="records-list" id="recordsList">
                <!-- Records will be populated dynamically -->
            </div>
        </section>

        <!-- Vitals Tracking Tab -->
        <section id="vitals-tracking" class="tab-content">
            <div class="section-header">
                <h2>Vitals Tracking</h2>
                <button class="btn btn-primary" id="recordVitalsBtn">
                    <i class="fas fa-plus"></i> Record Vitals
                </button>
            </div>

            <div class="vitals-container">
                <div class="vitals-select">
                    <label for="animalSelectVitals">Select Animal:</label>
                    <select id="animalSelectVitals">
                        <option value="">Choose an animal...</option>
                    </select>
                </div>

                <div class="vitals-form" id="vitalsForm" style="display: none;">
                    <h3>Record Vital Signs</h3>
                    <form id="recordVitalsForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="temperature">Temperature (°C) *</label>
                                <input type="number" id="temperature" placeholder="e.g., 38.5" step="0.1" min="30" max="45" required>
                                <span class="form-help">Normal: 36.5-39.5°C</span>
                            </div>
                            <div class="form-group">
                                <label for="weight">Weight (kg) *</label>
                                <input type="number" id="weight" placeholder="e.g., 25.5" step="0.1" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="heartRate">Heart Rate (bpm) *</label>
                                <input type="number" id="heartRate" placeholder="e.g., 80" min="20" max="200" required>
                                <span class="form-help">Normal: 40-180 bpm (varies by species)</span>
                            </div>
                            <div class="form-group">
                                <label for="respiratoryRate">Respiratory Rate (breaths/min)</label>
                                <input type="number" id="respiratoryRate" placeholder="e.g., 25" min="5" max="100">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="bloodPressure">Blood Pressure (systolic/diastolic)</label>
                            <input type="text" id="bloodPressure" placeholder="e.g., 120/80">
                        </div>

                        <div class="form-group">
                            <label for="vitalsNotes">Additional Notes</label>
                            <textarea id="vitalsNotes" rows="3" placeholder="Any observations or concerns..."></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Record Vitals</button>
                            <button type="button" class="btn btn-secondary" id="cancelVitals">Cancel</button>
                        </div>
                    </form>
                </div>

                <div class="vitals-history" id="vitalsHistory">
                    <!-- Vitals history will be populated here -->
                </div>
            </div>
        </section>

        <!-- Prescriptions Tab -->
        <section id="prescriptions" class="tab-content">
            <div class="section-header">
                <h2>Prescription Management</h2>
                <button class="btn btn-primary" id="newPrescriptionBtn">
                    <i class="fas fa-plus"></i> New Prescription
                </button>
            </div>

            <div class="prescriptions-container">
                <div class="prescription-select">
                    <label for="animalSelectPrescription">Select Animal:</label>
                    <select id="animalSelectPrescription">
                        <option value="">Choose an animal...</option>
                    </select>
                </div>

                <div class="prescription-form" id="prescriptionForm" style="display: none;">
                    <h3>Add New Prescription</h3>
                    <form id="addPrescriptionForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="medicationName">Medication Name *</label>
                                <input type="text" id="medicationName" placeholder="e.g., Amoxicillin" required>
                            </div>
                            <div class="form-group">
                                <label for="dosage">Dosage *</label>
                                <input type="text" id="dosage" placeholder="e.g., 500mg" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="frequency">Frequency *</label>
                                <select id="frequency" required>
                                    <option value="">Select frequency...</option>
                                    <option value="Once daily">Once daily</option>
                                    <option value="Twice daily">Twice daily</option>
                                    <option value="Three times daily">Three times daily</option>
                                    <option value="Every 12 hours">Every 12 hours</option>
                                    <option value="Every 8 hours">Every 8 hours</option>
                                    <option value="Every 6 hours">Every 6 hours</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="duration">Duration *</label>
                                <input type="text" id="duration" placeholder="e.g., 7 days, 2 weeks" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="startDate">Start Date *</label>
                                <input type="date" id="startDate" required>
                            </div>
                            <div class="form-group">
                                <label for="endDate">End Date *</label>
                                <input type="date" id="endDate" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="prescribedBy">Prescribed By *</label>
                                <input type="text" id="prescribedBy" placeholder="Veterinarian name" required>
                            </div>
                            <div class="form-group">
                                <label for="purpose">Purpose</label>
                                <input type="text" id="purpose" placeholder="e.g., Infection treatment">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="sideEffects">Known Side Effects</label>
                            <textarea id="sideEffects" rows="2" placeholder="List any known side effects..."></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Prescription</button>
                            <button type="button" class="btn btn-secondary" id="cancelPrescription">Cancel</button>
                        </div>
                    </form>
                </div>

                <div class="prescriptions-list" id="prescriptionsList">
                    <!-- Prescriptions will be populated here -->
                </div>
            </div>
        </section>

        <!-- Vet Visits Tab -->
        <section id="vet-visits" class="tab-content">
            <div class="section-header">
                <h2>Vet Visit Scheduling</h2>
                <button class="btn btn-primary" id="scheduleVisitBtn">
                    <i class="fas fa-plus"></i> Schedule Visit
                </button>
            </div>

            <div class="vet-visits-container">
                <div class="vet-select">
                    <label for="animalSelectVet">Select Animal:</label>
                    <select id="animalSelectVet">
                        <option value="">Choose an animal...</option>
                    </select>
                </div>

                <div class="vet-visit-form" id="vetVisitForm" style="display: none;">
                    <h3>Schedule Vet Visit</h3>
                    <form id="addVetVisitForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="visitDate">Visit Date *</label>
                                <input type="date" id="visitDate" required>
                            </div>
                            <div class="form-group">
                                <label for="visitType">Visit Type *</label>
                                <select id="visitType" required>
                                    <option value="">Select type...</option>
                                    <option value="checkup">Routine Checkup</option>
                                    <option value="treatment">Treatment</option>
                                    <option value="vaccination">Vaccination</option>
                                    <option value="surgery">Surgery</option>
                                    <option value="follow-up">Follow-up</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="vetName">Veterinarian Name *</label>
                                <input type="text" id="vetName" placeholder="Dr. Name" required>
                            </div>
                            <div class="form-group">
                                <label for="vetClinic">Clinic/Hospital</label>
                                <input type="text" id="vetClinic" placeholder="Clinic name">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="reasonForVisit">Reason for Visit</label>
                            <textarea id="reasonForVisit" rows="2" placeholder="Describe the reason for visit..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="nextFollowUp">Next Follow-up Date (if applicable)</label>
                            <input type="date" id="nextFollowUp">
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Schedule Visit</button>
                            <button type="button" class="btn btn-secondary" id="cancelVetVisit">Cancel</button>
                        </div>
                    </form>
                </div>

                <div class="vet-visits-list" id="vetVisitsList">
                    <!-- Vet visits will be populated here -->
                </div>
            </div>
        </section>

        <!-- Treatment Plans Tab -->
        <section id="treatment-plans" class="tab-content">
            <div class="section-header">
                <h2>Treatment Plans</h2>
                <button class="btn btn-primary" id="newTreatmentPlanBtn">
                    <i class="fas fa-plus"></i> Create Plan
                </button>
            </div>

            <div class="treatment-plans-container">
                <div class="treatment-select">
                    <label for="animalSelectTreatment">Select Animal:</label>
                    <select id="animalSelectTreatment">
                        <option value="">Choose an animal...</option>
                    </select>
                </div>

                <div class="treatment-plan-form" id="treatmentPlanForm" style="display: none;">
                    <h3>Create Treatment Plan</h3>
                    <form id="addTreatmentPlanForm">
                        <div class="form-group">
                            <label for="planCondition">Condition/Diagnosis *</label>
                            <input type="text" id="planCondition" placeholder="e.g., Fractured Leg" required>
                        </div>

                        <div class="form-group">
                            <label for="planDuration">Treatment Duration *</label>
                            <input type="text" id="planDuration" placeholder="e.g., 6 weeks" required>
                        </div>

                        <div class="form-group">
                            <label for="planObjectives">Treatment Objectives (one per line)</label>
                            <textarea id="planObjectives" rows="3" placeholder="1. Reduce inflammation&#10;2. Promote bone healing&#10;3. Restore mobility"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="planDietaryRequirements">Dietary Requirements</label>
                            <textarea id="planDietaryRequirements" rows="2" placeholder="Special diet instructions..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="planActivityRestrictions">Activity Restrictions</label>
                            <textarea id="planActivityRestrictions" rows="2" placeholder="e.g., Limited movement, no jumping..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="planExpectedOutcome">Expected Outcome</label>
                            <textarea id="planExpectedOutcome" rows="2" placeholder="Describe the expected recovery..."></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Create Plan</button>
                            <button type="button" class="btn btn-secondary" id="cancelTreatmentPlan">Cancel</button>
                        </div>
                    </form>
                </div>

                <div class="treatment-plans-list" id="treatmentPlansList">
                    <!-- Treatment plans will be populated here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <!-- Record Detail Modal -->
    <div id="recordDetailModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2>Medical Record Details</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="recordDetailContent">
                <!-- Details will be populated here -->
            </div>
        </div>
    </div>

    <!-- Alert Resolution Modal -->
    <div id="alertResolutionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Resolve Alert</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="resolveAlertForm">
                    <div class="form-group">
                        <label for="resolutionNotes">Resolution Notes</label>
                        <textarea id="resolutionNotes" rows="4" placeholder="Describe the action taken to resolve this alert..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Mark as Resolved</button>
                        <button type="button" class="btn btn-secondary" data-modal-close>Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer-placeholder"></div>

    <script src="../js/global/navbar.js"></script>
    <script src="../js/global/footer.js"></script>
    <script src="../js/pages/medical-records.js"></script>
</body>
</html>
